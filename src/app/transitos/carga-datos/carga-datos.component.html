<div class="row bgGris2"  style="margin:0">
    <div class="col-12" style="padding:20px">
        <h1 (click)="info()">Carga Excels</h1>
    </div>
</div>


<div class="row bgAmarillo pad20" style="margin:0">
    <div class="col-12">
        <h1>Rango de fechas</h1>
        <form (ngSubmit)="filtrarFecha( f )" #f="ngForm" >

            <div class="row ">
                <div class="col-12 col-md-3">
                    <div class="form-group">
                        <label>Fecha Inicial</label>
                        <input type="date" class="form-control" placeholder="Inicio Periodo" [(ngModel)]="firstDay" name="fechaIni" required>
                    </div>
                </div>
                <div class="col-12 col-md-3">
                    <div class="form-group">
                        <label>Fecha Final</label>
                        <input type="date" class="form-control" placeholder="Fin Periodo" [(ngModel)]="lastDay" name="fechaFin" required>
                    </div>
                </div>
        
                <div class="col-12 col-md-6">
                    <div class="form-group text-left">
                        <button type="submit" class="btn btn-outline-light botonMargen">
                         <i class="fa fa-search"></i>   
                         </button>

                         <button class="btn btn-outline-light botonMargen" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFiltros" aria-expanded="false" aria-controls="collapseFiltros">
                            Filtros
                          </button>
                    </div>
                </div>
            
              



            </div>
        
        </form>
    </div>

</div>

<div class="row bgGris2 pad20"  style="margin:0">
    <div class="col-12 col-md-4">

        <div #central>

            <h2>AutoPista Central</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="convertFile($event, 'ACFACTURADO')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('ACFACTURADO')">
                        <i [ngClass]="aplicaTarifa.ACFACTURADO ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
                    
                </div>
            </div>
            
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>No Facturados</label>
                    <input class="form-control" type="file" (change)="convertFile($event, 'ACNOFACTURADO')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('ACNOFACTURADO')">
                        <i [ngClass]="aplicaTarifa.ACNOFACTURADO ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
                    
                </div>
            </div>
            
        </div>
        <!-- Fin centrla -->

        <div #cnorte>

            <h2>Costanera Norte</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="convertFile($event, 'CNORTEF')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('CNORTEF')">
                        <i [ngClass]="aplicaTarifa.CNORTEF ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>No Facturados</label>
                    <input class="form-control" type="file" (change)="convertFile($event, 'CNORTENF')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('CNORTENF')">
                        <i [ngClass]="aplicaTarifa.CNORTENF ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>

    </div>
        <!-- Fin Cnorte -->


        <div #vespucioSur>

            <h2>Vespucio Sur</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="convertFile($event, 'VSUR')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('VSUR')">
                        <i [ngClass]="aplicaTarifa.VSUR ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>No Facturados</label>
                    <input class="form-control" type="file" (change)="convertFile($event, 'VSURNF')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('VSURNF')">
                        <i [ngClass]="aplicaTarifa.VSURNF ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>

        </div>
        <!-- Fin Vespucio sur -->
   
        <div #vespucioNorte>

            <h2>Vespucio Norte</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'VNORTE')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('VNORTE')">
                        <i [ngClass]="aplicaTarifa.VNORTE ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>No Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'VNORTENF')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('VNORTENF')">
                        <i [ngClass]="aplicaTarifa.VNORTENF ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>

        </div>
        <!-- Fin Vespucio Norte -->
     
        <div #vespucioOriente>

            <h2>Vespucio Oriente</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'VORIENTE')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('VORIENTE')">
                        <i [ngClass]="aplicaTarifa.VORIENTE ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>

        </div>
        <!-- Fin Vespucio Norte -->
       
        <div #ruta del maipo>

            <h2>Ruta del Maipo</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'RMAIPO')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('RMAIPO')">
                        <i [ngClass]="aplicaTarifa.RMAIPO ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>
   
        </div> 
        <!-- Fin Ruta del maipo -->

        <div #stgoLampo>

            <h2>Autov√≠a Santiago Lampa</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label >Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'STGOLAMPA')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('STGOLAMPA')">
                        <i [ngClass]="aplicaTarifa.STGOLAMPA ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>
          
            <div class="row">
                <div class="col-8 col-md-7">
                    <label> No Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'STGOLAMPANF')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('STGOLAMPANF')">
                        <i [ngClass]="aplicaTarifa.STGOLAMPANF ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>
           

        </div>
        <!-- Fin Santiago Lampa -->

        <div #rutapass>

            <h2>Ruta Pass</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'RPASS')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('RPASS')">
                        <i [ngClass]="aplicaTarifa.RMAIPO ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>

        </div>
        <!-- Fin Ruta Pass -->

        <div #survia>

            <h2>Survias</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'SURVIAS')">
                </div>
                <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('SURVIAS')">
                        <i [ngClass]="aplicaTarifa.SURVIAS ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div>
            </div>

        </div>
        <!-- Fin Ruta Pass -->
      
        <div #canopsa>

            <h2>Canopsa</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>No Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'CANOPSA')">
                </div>
                <div class="col">
                    
                    <!-- <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('CANOPSA')">
                        <i [ngClass]="aplicaTarifa.CANOPSA ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p> -->
            
                </div>
            </div>

        </div>
        <!-- Fin Ruta Pass -->


          <div #rutasur>

            <h2>Ruta Sur</h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'RUTASUR')">
                </div>
                <!-- <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('RUTASUR')">
                        <i [ngClass]="aplicaTarifa.RUTASUR ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div> -->
            </div>

        </div>
        <!-- Fin Ruta Pass -->


          <div #nahuelbuta >

            <h2>Nahuelbuta </h2>
            <div class="row">
                <div class="col-8 col-md-7">
                    <label>Facturados</label>
                    <input class="form-control" type="file" (change)="addXlsx($event, 'NAHUELBUTA')">
                </div>
                <!-- <div class="col">
                    
                    <p style="margin-top:32px" class="pointer" (click)="aplicarTarifa('RUTASUR')">
                        <i [ngClass]="aplicaTarifa.RUTASUR ? 'fa-regular fa-square-check' : 'fa-regular fa-square'"></i> 
                        Aplica Tarifa 
                    </p>
            
                </div> -->
            </div>

        </div>
        <!-- Fin Ruta Pass -->



    </div>



    <div class="col-12 col-md-8">

        <div *ngIf="newTransitos.length > 0 && loading2 == false" class="row">
            <div class="col-12">
                <h1>Autopista {{autopista}} </h1>
                <button class="btn btn-warning" (click)="guardar()">Guardar Transitos</button>
                <table class="table table-striped table-hover">
                    <thead class="thead-dark">
                        <tr>
                            <th>#</th>
                            <th>Patente</th>
                            <th>Portico</th>
                            <th>Eje</th>
                            <th>Fecha</th>
                            <th>Hora</th>
                            <th>Monto</th>
                            <th>Aplica Tarifa</th>
                        </tr>
                    </thead>
                    <tbody  class="animated fadeIn">
                        <tr class="pointer" *ngFor="let c of newTransitos ; index as i " >
                            <td>{{ i + 1 }}</td>
                            <td>{{c.patente}}</td>
                            <td>{{c.portico }}</td>                                
                            <td>{{c.eje}}</td>                                
                            <td>{{c.fecha}}</td>                                
                            <td>{{c.hora}}</td>                                
                            <td>${{c.monto}}</td>       
                            <th *ngIf="c.aplicaTarifa > 0"><i class="fa-solid fa-check text-success"></i></th>
                            <th *ngIf="c.aplicaTarifa < 1"><i class="fa-solid fa-xmark text-danger"></i></th>
                         
                        </tr>
                    </tbody>
        
                  
                </table>
            </div>
        </div>

        <div *ngIf="loading2" class="row pad20">
            <div class="col-12 text-center">
                <i class="fa-solid fa-spinner fa-spin"></i>
                <p>Cargando</p>
            </div>
        </div>

    </div>
</div>




<app-loading *ngIf="loading"></app-loading>